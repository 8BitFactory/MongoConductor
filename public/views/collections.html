<div id="collectionFlipPanel" class="flip-container" ontouchstart="this.classList.toggle('hover');">
    <div class="flipper">
        <div class="front container-padded">
            <div class="page-header">
                <h3>
                    {{ collection.name }}
                    <small>Collection</small>
                    <small class="pull-right">
                        <button data-toggle="modal" data-target="#itemModal" class="btn btn-primary" ng-click="addItem()">Add</button>
                        <button class="btn btn-default" ng-class="{hide: !collection._id}" ng-click="editCollection(collection)">Edit Collection</button>
                        <button data-toggle="modal" data-target="#documentationModal" class="btn btn-default">API Documentation</button>
                    </small>
                </h3>
            </div>
            <div infinite-scroll='list.page()' infinite-scroll-disabled='list.busy' infinite-scroll-distance='1'>
                <table class="table table-condensed table-striped responsive-table">
                    <thead>
                        <tr>
                            <th ng-repeat="field in fieldKeys(collection.definition)">{{ collection.definition[field].label || field }}</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="item in items">
                            <td ng-repeat="field in fieldKeys(collection.definition)" data-title="{{field}}">{{ item[field] }}</td>
                            <td>
                                <button data-toggle="modal" data-target="#itemModal" class="btn btn-default" ng-click="editItem(item)">Edit</button>
                                <button data-toggle="modal" data-target="#itemModalDelete" class="btn btn-danger" ng-click="deleteItem(item)">Delete</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div ng-show='list.busy'>Loading {{ collection.name }}...</div>
            </div>
        </div>

        <div class="back container-padded">
            <div class="page-header">
                <h3>
                    {{ collection.name }}
                    <small>Collection</small>
                    <small class="pull-right">
                        <button class="btn btn-primary" ng-click="saveCollection(collection)">Save</button>
                        <button class="btn btn-default" ng-click="cancelCollection(collection)" ng-class="{hide: !collection._id}">Cancel</button>
                        <button data-toggle="modal" data-target="#collectionModalDelete" class="btn btn-danger" ng-class="{hide: !collection._id}">Delete</button>
                    </small>
                </h3>
            </div>
            <div class="row">
                <div class="col-lg-3">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Settings</h3>
                        </div>
                        <div class="panel-body">
                            <ul class="nav nav-pills nav-stacked">
                                <li class="active"><a href="javascript:" data-target="#general" data-toggle="tab">General
                                  <i class="icon icon-chevron-right pull-right"></i></a>
                                </li>
                                <li><a href="javascript:" data-target="#fields" data-toggle="tab">Fields
                                  <i class="icon icon-chevron-right pull-right"></i></a>
                                </li>
                                <li><a href="javascript:" data-target="#filters" data-toggle="tab">Filters
                                  <i class="icon icon-chevron-right pull-right"></i></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="tab-content">

                    <!-- Begin General -->
                    <div class="tab-pane col-lg-9 active" id="general" ng-include="'/views/collections.edit.general.html'">
                    </div>
                    <!-- End General -->

                    <!-- Begin Schema -->
                    <div class="tab-pane" id="fields" ng-include="'/views/collections.edit.fields.html'">
                    </div>
                    <!-- End Schema -->

                    <!-- Begin Filters -->
                    <div class="tab-pane" id="filters" ng-include="'/views/collections.edit.filters.html'">
                    </div>
                    <!-- End Filters -->
                </div>
            </div>
        </div>
    </div>
</div>

<ng-include src="'/views/collections.item.edit.html'"></ng-include>
<ng-include src="'/views/collections.item.delete.html'"></ng-include>
<ng-include src="'/views/collections.delete.html'"></ng-include>
<ng-include src="'/views/collections.documentation.html'"></ng-include>
